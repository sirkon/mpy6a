# Операции проводимые в рамках лога

## Операции при работе с клиентом.

Посмотрите [простой пример](mpy6a.md) работы с WAL-ом.

Из него вытекает, что нужны следующие операции:

1. Создание новой сессии WAL.
2. Запись бинарных данных в данную сессию.
3. На практике полезной оказыается функция замены содержимого сессии на данное (rewrite).
4. Удалить сессию, когда операция прошла успешно.
5. Отправить сессию на проигрывание при неуспехе на какое-то время в будущем. Будем называть это "сохранением" сессии.
6. Восстановить сохранённую сессию.

## Операции с хранилищем данных.

При работе системы проводятся следующие операции над файловой системой:

* Сброс сохранённых сессий упорядоченных по времени повтора в файл.
  Вместе с этой операцией производится

  1. Сброс слепка активных сессий в новый файл

* Переключение файла лога операций.
* Операция объединения файлов с сохранёнными сессиями.
* Операции удаления файлов.