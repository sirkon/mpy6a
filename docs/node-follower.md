# Функционирование ведомых узлов

Узел находящийся в данном состоянии в основном пассивен и только ожидает получения операций от лидера.

## Штатное функционирование.

### Получена операция от лидера

1. Если последние закоммиченные данные на лидере относятся к предыдущему сроку и на данном узле есть незакомиченные 
   операции чей индекс больше, то эти такие незакомиченные данные удаляются. При этом:
   * Если индекс состояния меньше чем подтверждаемые данные и в очереди нет данных с полученным индексом, то узел
     переходит в состояние синхронизации.
2. Если какие-то сохранённые операции были подтверждены как закомиченные, то они (операции) применяются к состоянию.
3. Полученная операция сохраняется в очереди.
4. Лидеру шлётся сообщение, что всё хорошо.

### Получено приглашение проголосовать.

1. Проверяется, что индекс состояния кандидата не меньше как индекса состояния кандидата, так и максимального индекса
   неподтверждённых операций.
    1. Если это так, то голосуем "За".
    2. Иначе не голосуем.

### Получен запрос на синхронизацию состояния.

* Если лидер известен, то отдаём редирект на него.
* Иначе сообщаем, что не являемся лидером и, вообще, таких не знаем.

## Давно не было данных от лидера.

Инициируем голосование.