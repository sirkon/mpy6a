# Глоссарий.

## Узел кластера.

Это машина работающая как часть кластера, которая может находится в одном из трёх состояний:

* Инициализация (init) — машина подключается к другим узлам кластера.
* Синхронизация (upsync) — машина доводит своё состояние до актуального получая данные от лидера.
* Последователь (follower) — машина получает и сохраняет данные от лидера.
* Кандидат (candidate) — машина начала голосование за право стать лидером.
* Лидер (leader) — машина является лидером и ведёт процесс репликации с последователями, а так же обеспечивает 
  данными синхронизирующиеся машины.

## Топики.

Топик — это сущность со следующими аттрибутами:

* Индекс топика, int32. Уникальное значение.
* Интервал времени, это минимальное время по прошествии которого начинается повтор для сессии (см. далее) топика. 
* Максимальное число попыток повторов сессий.

## Сессии.

Сессия это кортеж состоящий из следующих компонентов:

1. Уникальный идентификатор.
2. Идентификатор состояния, равный состоянию системы в момент когда было совершено последнее изменение бинарных данных 
   сессии. 
3. Топик.
4. Прошедшее число повторов.
5. Бинарные данные.

Сессия может создаваться в двух случах.

* По запросу клиента создаётся пустая сессия.
* При повторе сессия восстанавливается из хранилища.

В хранилище сессия так же имеет получает аттрибут

* Время запланированного повтора, в соответствии с политикой топика.

## Повтор сессии.

Это процесс, в рамках которого подписчик на топик к которому относится данная сессия:

1. Получает бинарные данные сессии.
2. Проводит работу с ними, в процессе могут осуществляться следующие манипуляции:
   * Добавление бинарных данных в конец данных сессии.
   * Очистка данных в сессии — бинарные данные сессии становятся пустыми.
   * Завершение сессии, подписчик может дать указание считать данную сессию выполненной, такая сессии удаляются
     из системы и никогда больше не повторяются.

Внимание: повтор сессии начинается не раньше запланирванного времени повтора, при этом ситуация, когда повтор начался
          с запозданием относительно запланированного времени — штатная.

## Операция

Единица передачи данных от лидера к последователям при штатном функционировании.

* Индекс операции — пара (срок, индекс операции в рамках срока). Индексы A = (tA, tidA) и B = (tB, tidB) сравнимы по 
  правилу:
  * Если tA ≠ tB, то результатом является сравнение tA и tB
  * Иначе, результатом является сравнение tidA и tidB

## Состояние

Обычное состояние в смысле RAFT-а. Индексом состояния является индекс последней применённой операции.
